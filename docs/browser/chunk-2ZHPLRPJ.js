import{a as j,b as q}from"./chunk-GFA4DI2K.js";import{a as R}from"./chunk-XN4IU7IR.js";import{a as J}from"./chunk-NIEB7D2Q.js";import{l as H}from"./chunk-CK5KVRAU.js";import{a as D,c as N,g as O,l as z}from"./chunk-VV4JPCKW.js";import{a as G}from"./chunk-HM4DDKQW.js";import"./chunk-NI4CGMN2.js";import{h as U}from"./chunk-ZIDVCAEP.js";import{m as $}from"./chunk-PXEJ7JHL.js";import{Ab as l,Hb as d,Ib as p,Kb as V,Lb as I,Mb as A,Na as b,Ob as B,Pb as E,Qb as L,Ra as o,Ub as v,Wb as f,aa as g,ab as y,da as W,gb as S,ib as T,kc as M,mb as u,na as m,nb as k,oa as _,ob as w,pb as P,qb as r,rb as a,sb as h,vb as x,zb as C}from"./chunk-HXR6WZJS.js";var K=(n,c)=>c.id,Q=n=>["/details",n],X=()=>[1,2,3,4,5];function Y(n,c){if(n&1){let e=x();r(0,"i",15),C("click",function(){m(e);let i=l().$implicit,s=l();return _(s.addToWishList(i.id))}),a()}}function Z(n,c){if(n&1){let e=x();r(0,"i",16),C("click",function(){m(e);let i=l().$implicit,s=l();return _(s.deleteWishlist(i.id))}),a()}}function ee(n,c){n&1&&(r(0,"span"),h(1,"i",17),a())}function te(n,c){n&1&&h(0,"i",13)}function ie(n,c){if(n&1){let e=x();r(0,"div",3)(1,"div",4)(2,"div",5),S(3,Y,1,0,"i",6)(4,Z,1,0,"i",7),a(),r(5,"div",8),h(6,"img",9),r(7,"h3",10),d(8),a(),r(9,"h4",11),d(10),v(11,"termText"),a(),r(12,"div",12)(13,"span"),d(14),v(15,"currency"),a(),r(16,"div"),w(17,ee,2,0,"span",null,k),S(19,te,1,0,"i",13),r(20,"span"),d(21),a()()()(),r(22,"button",14),C("click",function(){let i=m(e).$implicit,s=l();return _(s.addToCart(i.id))}),d(23,"Add To Cart"),a()()()}if(n&2){let e=c.$implicit,t=l();o(3),u(3,t.wishlistIds().includes(e.id)?-1:3),o(),u(4,t.wishlistIds().includes(e.id)?4:-1),o(),T("routerLink",L(16,Q,e._id)),o(),T("src",e.imageCover,b)("alt",e.title),o(2),p(e.category.name),o(2),p(f(11,10,e.title,2)),o(4),p(f(15,13,e.price,"GBP")),o(3),P(E(18,X).slice(0,e.ratingsAverage)),o(2),u(19,e.ratingsAverage%1!==0?19:-1),o(2),p(e.ratingsAverage)}}function ne(n,c){if(n&1){let e=x();r(0,"i",15),C("click",function(){m(e);let i=l().$implicit,s=l();return _(s.addToWishList(i.id))}),a()}}function re(n,c){if(n&1){let e=x();r(0,"i",16),C("click",function(){m(e);let i=l().$implicit,s=l();return _(s.deleteWishlist(i.id))}),a()}}function oe(n,c){n&1&&(r(0,"span"),h(1,"i",17),a())}function ae(n,c){n&1&&h(0,"i",13)}function ce(n,c){if(n&1){let e=x();r(0,"div",3)(1,"div",4)(2,"div",5),S(3,ne,1,0,"i",6)(4,re,1,0,"i",7),a(),r(5,"div",8),h(6,"img",9),r(7,"h3",10),d(8),a(),r(9,"h4",11),d(10),v(11,"termText"),a(),r(12,"div",12)(13,"span"),d(14),v(15,"currency"),a(),r(16,"div"),w(17,oe,2,0,"span",null,k),S(19,ae,1,0,"i",13),r(20,"span"),d(21),a()()()(),r(22,"button",14),C("click",function(){let i=m(e).$implicit,s=l();return _(s.addToCart(i.id))}),d(23,"Add To Cart"),a()()()}if(n&2){let e=c.$implicit,t=l();o(3),u(3,t.wishlistIds().includes(e.id)?-1:3),o(),u(4,t.wishlistIds().includes(e.id)?4:-1),o(),T("routerLink",L(16,Q,e._id)),o(),T("src",e.imageCover,b)("alt",e.title),o(2),p(e.category.name),o(2),p(f(11,10,e.title,2)),o(4),p(f(15,13,e.price,"GBP")),o(3),P(E(18,X).slice(0,e.ratingsAverage)),o(2),u(19,e.ratingsAverage%1!==0?19:-1),o(2),p(e.ratingsAverage)}}var Te=(()=>{let c=class c{constructor(){this._ProductsService=g(R),this._WishlistService=g(J),this._CartService=g(G),this._ToastrService=g(H),this.productList=y([]),this.productList1=y([]),this.wishlistIds=M(()=>this._WishlistService.wishListid()),this.data=""}ngOnInit(){this.productUnsub=this._ProductsService.getAllProducts().subscribe({next:t=>{console.log(t.data),this.productList.set(t.data)},error:t=>{console.log(t)}}),this.productUnsub=this._ProductsService.getAllProductsExtra().subscribe({next:t=>{console.log(t.data),this.productList1.set(t.data)},error:t=>{console.log(t)}}),this._WishlistService.getWishList().subscribe({next:t=>{console.log(t),this._WishlistService.wishListid.set(t.data.map(i=>i._id)),console.log(this.wishlistIds())}})}addToWishList(t){this._WishlistService.addToWishList(t).subscribe({next:i=>{console.log(i),this._WishlistService.wishListid.set(i.data)},error:i=>{console.log(i)}})}addToCart(t){this._CartService.addProductToCart(t).subscribe({next:i=>{console.log(i.data),this._ToastrService.success(i.message,"FreshCart"),this._CartService.cartNumber.set(i.numOfCartItems)}})}deleteWishlist(t){this._WishlistService.RemoveEishList(t).subscribe({next:i=>{this._WishlistService.wishListid.set(i.data)}})}ngOnDestroy(){this.productUnsub?.unsubscribe()}};c.\u0275fac=function(i){return new(i||c)},c.\u0275cmp=W({type:c,selectors:[["app-product"]],standalone:!0,features:[B],decls:11,vars:7,consts:[[1,"my-3"],["id","search","type","search","placeholder","search by name...",1,"w-50","form-control","my-3","mx-auto",3,"ngModelChange","ngModel"],[1,"row","g-3"],["id","parent",1,"col-md-2"],[1,"product","py-2"],["id","heart",1,"my-2","p-2"],[1,"fa-solid","fa-heart","cr","fa-xl"],[1,"fa-solid","fa-heart","text-danger","cr","fa-xl"],[1,"cr",3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main"],[1,"h6"],[1,"d-block"],[1,"fa-solid","fa-star-half-stroke","rating-color"],[1,"btn-main","w-100",3,"click"],[1,"fa-solid","fa-heart","cr","fa-xl",3,"click"],[1,"fa-solid","fa-heart","text-danger","cr","fa-xl",3,"click"],[1,"fas","fa-star","rating-color"]],template:function(i,s){i&1&&(r(0,"section",0)(1,"h2"),d(2,"Popular Products:"),a(),r(3,"input",1),A("ngModelChange",function(F){return I(s.data,F)||(s.data=F),F}),a(),r(4,"div",2),w(5,ie,24,19,"div",3,K),v(7,"search"),w(8,ce,24,19,"div",3,K),v(10,"search"),a()()),i&2&&(o(3),V("ngModel",s.data),o(2),P(f(7,1,s.productList(),s.data)),o(3),P(f(10,4,s.productList1(),s.data)))},dependencies:[U,$,j,q,z,D,N,O]});let n=c;return n})();export{Te as ProductComponent};
