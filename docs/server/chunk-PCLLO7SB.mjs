import './polyfills.server.mjs';
import{a as k,b as _,c as N,d as A,h as q,i as D,j as R,k as V,m as G}from"./chunk-7NVGYZWJ.mjs";import{a as B}from"./chunk-ISP7BWSV.mjs";import"./chunk-CBYSDMSX.mjs";import{k as T,l as x}from"./chunk-ZIYERYGL.mjs";import{j as b}from"./chunk-HAIROEPU.mjs";import{Gb as s,Hb as y,Nb as L,Qa as m,Qb as E,Y as F,aa as w,fb as g,hb as h,lb as d,pb as o,qb as t,rb as C,yb as S,zb as v}from"./chunk-3BG2KQPV.mjs";import"./chunk-VVCT4QZE.mjs";var M=(e,n)=>({"is-valid":e,"is-invalid":n});function j(e,n){e&1&&(o(0,"p",13),s(1,"Email is required"),t())}function I(e,n){e&1&&(o(0,"p",13),s(1,"Enter Valid Email"),t())}function P(e,n){if(e&1&&(o(0,"div",6),g(1,j,2,0,"p",13)(2,I,2,0),t()),e&2){let u,r=v();m(),d(1,(u=r.loginForm.get("email"))!=null&&u.getError("required")?1:(u=r.loginForm.get("email"))!=null&&u.getError("email")?2:-1)}}function U(e,n){e&1&&(o(0,"p",13),s(1,"password is required"),t())}function $(e,n){e&1&&(o(0,"p",13),s(1,"Enter Valid password"),t())}function z(e,n){if(e&1&&(o(0,"div",6),g(1,U,2,0,"p",13)(2,$,2,0),t()),e&2){let u,r=v();m(),d(1,(u=r.loginForm.get("password"))!=null&&u.getError("required")?1:(u=r.loginForm.get("password"))!=null&&u.getError("pattern")?2:-1)}}function H(e,n){e&1&&(o(0,"span"),C(1,"i",14),t())}function J(e,n){if(e&1&&(o(0,"p",12),s(1),t()),e&2){let u=v();m(),y(u.msgError)}}function K(e,n){e&1&&(o(0,"p"),s(1,"Success"),t())}var te=(()=>{let n=class n{constructor(){this._FormBuilder=F(V),this._Router=F(T),this._AuthService=F(B),this.msgError="",this.isLoading=!1,this.msgSuccess=!1,this.loginForm=this._FormBuilder.group({email:[null,[_.required,_.email]],password:[null,[_.required,_.pattern(/^\w{6,}$/)]]})}loginSubmit(){this.loginForm.valid?(this.isLoading=!0,this._AuthService.setLoginForm(this.loginForm.value).subscribe({next:r=>{r.message==="success"&&(this.msgSuccess=!0,localStorage.setItem("userToken",r.token),this._AuthService.saveUserDat(),this._Router.navigate(["/home"]),this.isLoading=!1)},error:r=>{this.msgError=r.error.message,console.log(r),this.isLoading=!1}})):(this.loginForm.setErrors({mismatch:!0}),this.loginForm.markAllAsTouched())}};n.\u0275fac=function(f){return new(f||n)},n.\u0275cmp=w({type:n,selectors:[["app-login"]],standalone:!0,features:[L],decls:22,vars:14,consts:[[1,"bg-main-light","shadow","p-2","my-2","rounded-4"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end","gap-3"],["routerLink","/forget",1,"link-primary"],["type","submit",1,"btn-main",3,"click"],[1,"w-50","alert","alert-danger","m-0"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(f,i){if(f&1&&(o(0,"section",0)(1,"h1",1),s(2,"login Now:"),t(),o(3,"form",2),S("ngSubmit",function(){return i.loginSubmit()}),o(4,"div",3)(5,"label",4),s(6,"email"),t(),C(7,"input",5),g(8,P,3,1,"div",6),t(),o(9,"div",3)(10,"label",7),s(11,"password"),t(),C(12,"input",8),g(13,z,3,1,"div",6),t(),o(14,"div",9)(15,"a",10),s(16," ForgotPassword "),t(),o(17,"button",11),S("click",function(){return i.loginSubmit()}),s(18," login "),g(19,H,2,0,"span"),t()(),g(20,J,2,1,"p",12)(21,K,2,0,"p"),t()()),f&2){let l,p,a,c;m(3),h("formGroup",i.loginForm),m(4),h("ngClass",E(8,M,!((l=i.loginForm.get("email"))!=null&&l.errors)&&(((l=i.loginForm.get("email"))==null?null:l.touched)||((l=i.loginForm.get("email"))==null?null:l.dirty)),((l=i.loginForm.get("email"))==null?null:l.errors)&&(((l=i.loginForm.get("email"))==null?null:l.touched)||((l=i.loginForm.get("email"))==null?null:l.dirty)))),m(),d(8,(p=i.loginForm.get("email"))!=null&&p.errors&&((p=i.loginForm.get("email"))!=null&&p.touched||(p=i.loginForm.get("email"))!=null&&p.dirty)?8:-1),m(4),h("ngClass",E(11,M,!((a=i.loginForm.get("password"))!=null&&a.errors)&&(((a=i.loginForm.get("password"))==null?null:a.touched)||((a=i.loginForm.get("password"))==null?null:a.dirty)),((a=i.loginForm.get("password"))==null?null:a.errors)&&(((a=i.loginForm.get("password"))==null?null:a.touched)||((a=i.loginForm.get("password"))==null?null:a.dirty)))),m(),d(13,(c=i.loginForm.get("password"))!=null&&c.errors&&((c=i.loginForm.get("password"))!=null&&c.touched||(c=i.loginForm.get("password"))!=null&&c.dirty)?13:-1),m(6),d(19,i.isLoading?19:-1),m(),d(20,i.msgError?20:-1),m(),d(21,i.msgSuccess?21:-1)}},dependencies:[G,q,k,N,A,D,R,b,x]});let e=n;return e})();export{te as LoginComponent};
