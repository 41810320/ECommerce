import './polyfills.server.mjs';
import{a as F}from"./chunk-BKQSC5ZR.mjs";import"./chunk-CBYSDMSX.mjs";import{l as T}from"./chunk-ZIYERYGL.mjs";import{o as D}from"./chunk-HAIROEPU.mjs";import{Gb as s,Hb as f,Ib as x,Ma as g,Nb as w,Pb as I,Qa as l,Tb as y,Vb as E,Y as v,aa as b,hb as C,ka as p,la as u,nb as h,ob as S,pb as n,qb as r,rb as m,ub as k,yb as d,zb as _}from"./chunk-3BG2KQPV.mjs";import"./chunk-VVCT4QZE.mjs";var P=(o,a)=>a.product.id,V=o=>["/orders",o];function $(o,a){if(o&1){let c=k();n(0,"div",5)(1,"div",7)(2,"div"),m(3,"img",8),r()(),n(4,"div",9)(5,"div")(6,"h3",10),s(7),r(),n(8,"p",11),s(9),r(),n(10,"button",12),d("click",function(){let e=p(c).$implicit,i=_();return u(i.removeItem(e.product.id))}),m(11,"i",13),r()(),n(12,"div",14)(13,"span",15),d("click",function(){let e=p(c).$implicit,i=_();return u(i.updateCount(e.product.id,e.count+1))}),m(14,"i",16),r(),n(15,"span"),s(16),r(),n(17,"span",15),d("click",function(){let e=p(c).$implicit,i=_();return u(i.updateCount(e.product.id,e.count-1))}),m(18,"i",17),r()()()()}if(o&2){let c=a.$implicit;l(3),C("src",c.product.imageCover,g)("alt",c.product.title),l(4),f(c.product.title),l(2),x("Price: ",c.price,""),l(7),f(c.count)}}var G=(()=>{let a=class a{constructor(){this._CartService=v(F),this.cartDetails={}}ngOnInit(){this._CartService.getProductsCart().subscribe({next:t=>{console.log(t.data),this.cartDetails=t.data},error:t=>{console.log(t)}})}removeItem(t){this._CartService.deleteSpecificCartItem(t).subscribe({next:e=>{console.log(e),this.cartDetails=e.data,this._CartService.cartNumber.set(e.numOfCartItems)},error:e=>{console.log(e)}})}updateCount(t,e){e>0?this._CartService.updateProductQuantity(t,e).subscribe({next:i=>{console.log(i),this.cartDetails=i.data},error:i=>{console.log(i)}}):this.removeItem(t)}clearItems(){this._CartService.clearCart().subscribe({next:t=>{console.log(t),t.massage=="success"&&(this.cartDetails={},this._CartService.cartNumber.set(0))},error:t=>{console.log(t)}})}};a.\u0275fac=function(e){return new(e||a)},a.\u0275cmp=b({type:a,selectors:[["app-cart"]],standalone:!0,features:[w],decls:13,vars:7,consts:[[1,"bg-main-light","rounded-4","shadow","p-4","my-3","w-75","mx-auto"],[1,"d-flex","justify-content-between","align-items-center"],[1,"h2"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-main"],[1,"row","mb-1","border-bottom"],[1,"btn-main","mt-2",3,"routerLink"],[1,"col-md-1"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","align-items-center","justify-content-between"],[1,"h5"],[1,"text-main","m-0"],[1,"btn","p-0","text-danger","cr",3,"click"],[1,"fa-solid","fa-trash"],[1,"d-flex","align-items-center","gap-2"],[1,"text-main","cr",3,"click"],[1,"fa-solid","fa-circle-plus","fa-2x"],[1,"fa-solid","fa-circle-minus","fa-2x"]],template:function(e,i){e&1&&(n(0,"section",0)(1,"div",1)(2,"h1",2),s(3,"Shop Cart"),r(),n(4,"button",3),d("click",function(){return i.clearItems()}),s(5,"Clear Cart"),r()(),n(6,"p",4),s(7),y(8,"currency"),r(),h(9,$,19,5,"div",5,P),n(11,"button",6),s(12,"Orders"),r()()),e&2&&(l(7),x("Total Cart Price: ",E(8,2,i.cartDetails.totalCartPrice,"GBP"),""),l(2),S(i.cartDetails.products),l(2),C("routerLink",I(5,V,i.cartDetails._id)))},dependencies:[D,T]});let o=a;return o})();export{G as CartComponent};
